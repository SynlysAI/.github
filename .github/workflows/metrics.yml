name: Minimal Metrics
on:
  # 只保留手动触发，避免自动触发限流
  workflow_dispatch:

permissions:
  contents: write
  actions: read

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Generate Metrics
        uses: lowlighter/metrics@latest
        with:
          # GitHub Token
          token: ${{ secrets.METRICS_TOKEN }}
          
          # 核心配置
          user: SynlysAI
          template: base  # 使用最基础的模板
          config_timezone: UTC  # 使用UTC时区
          
          # 最小化功能
          base: header  # 只保留header模块
          repositories_forks: false  # 不包含fork仓库
          
          # 关闭所有插件
          plugin_achievements: no
          plugin_followup: no
          plugin_habits: no
          plugin_introduction: no
          plugin_languages: no
          plugin_traffic: no
          
          # 限制数据量
          repositories: 10  # 限制显示的仓库数量